Grig Grog, [20.11.2025 17:39]
–Ø –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª –¥–ª—è –≤–∞—Å –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é. –í –Ω–µ–º —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –æ–ø–∏—Å–∞–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ –∏ –≤–µ—Å—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –∫–æ–¥ (app.py –∏ index.html), —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–π –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è.–í—ã –º–æ–∂–µ—Ç–µ —Å–∫–∞—á–∞—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª, –ø–µ—Ä–µ–¥–∞—Ç—å –µ–≥–æ –¥—Ä—É–≥–æ–º—É —á–µ–ª–æ–≤–µ–∫—É, –∏ –æ–Ω —Å–º–æ–∂–µ—Ç –ø–æ—à–∞–≥–æ–≤–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–∞:–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ (Python, FFmpeg, –±–∏–±–ª–∏–æ—Ç–µ–∫–∏).–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–∫–∞–∫–∏–µ –ø–∞–ø–∫–∏ —Å–æ–∑–¥–∞—Ç—å).–ö–æ–¥ –±—ç–∫–µ–Ω–¥–∞ (app.py).–ö–æ–¥ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (index.html).–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É.–°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª –ø–æ —Å—Å—ã–ª–∫–µ –Ω–∏–∂–µ: code Pythondownloadcontent_copy
expand_less    import os

# –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
instruction_content = """
================================================================================
–ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ó–ê–ü–£–°–ö–£ –í–ï–ë-–ü–†–ò–õ–û–ñ–ï–ù–ò–Ø –î–õ–Ø –¢–†–ê–ù–°–ö–†–ò–ë–ê–¶–ò–ò (WHISPER + FLASK)
================================================================================

–≠—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å –∏—Ö –≤ —Ç–µ–∫—Å—Ç —Å –ø–æ–º–æ—â—å—é –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ OpenAI Whisper –∏ —Å–∫–∞—á–∏–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

–®–ê–ì 1: –ü–û–î–ì–û–¢–û–í–ö–ê –û–ö–†–£–ñ–ï–ù–ò–Ø
--------------------------------------------------------------------------------
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Python (–≤–µ—Ä—Å–∏—è 3.8 –∏–ª–∏ –≤—ã—à–µ).
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ FFmpeg (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞—É–¥–∏–æ):
   - Windows: –°–∫–∞—á–∞–π—Ç–µ —Å https://ffmpeg.org/download.html, —Ä–∞—Å–ø–∞–∫—É–π—Ç–µ –∏ –¥–æ–±–∞–≤—å—Ç–µ –ø–∞–ø–∫—É `bin` –≤ PATH.
   - Mac: –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ `brew install ffmpeg`.
   - Linux: –í—ã–ø–æ–ª–Ω–∏—Ç–µ `sudo apt update && sudo apt install ffmpeg`.

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Python. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤–≤–µ–¥–∏—Ç–µ:
   pip install flask openai-whisper

–®–ê–ì 2: –°–û–ó–î–ê–ù–ò–ï –°–¢–†–£–ö–¢–£–†–´ –ü–†–û–ï–ö–¢–ê
--------------------------------------------------------------------------------
–°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `transcriber`).
–í–Ω—É—Ç—Ä–∏ –Ω–µ–µ —Å–æ–∑–¥–∞–π—Ç–µ —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

transcriber/
‚îú‚îÄ‚îÄ app.py              <-- –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª Python (–∫–æ–¥ —Å–º. –Ω–∏–∂–µ)
‚îú‚îÄ‚îÄ uploads/            <-- (–°–æ–∑–¥–∞—Å—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏) –ü–∞–ø–∫–∞ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
‚îî‚îÄ‚îÄ templates/          <-- –ü–∞–ø–∫–∞ –¥–ª—è HTML —à–∞–±–ª–æ–Ω–æ–≤
    ‚îî‚îÄ‚îÄ index.html      <-- –§–∞–π–ª –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–∫–æ–¥ —Å–º. –Ω–∏–∂–µ)

–®–ê–ì 3: –ö–û–î –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
--------------------------------------------------------------------------------

>>> –§–ê–ô–õ: app.py
(–°–æ–∑–¥–∞–π—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –ø–∞–ø–∫–∏ transcriber –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥ –Ω–∏–∂–µ)

import os
import whisper
from flask import Flask, render_template, request, jsonify

app = Flask(__name__)

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
UPLOAD_FOLDER = 'uploads'
os.makedirs(UPLOAD_FOLDER, exist_ok=True)

# –ó–∞–≥—Ä—É–∂–∞–µ–º –º–æ–¥–µ–ª—å Whisper
# –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏: "tiny", "base", "small", "medium", "large"
print("–ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ Whisper... –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ.")
model = whisper.load_model("base")
print("–ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞!")

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/transcribe', methods=['POST'])
def transcribe():
    if 'file' not in request.files:
        return jsonify({'error': '–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω'}), 400
    
    file = request.files['file']
    if file.filename == '':
        return jsonify({'error': '–§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω'}), 400

    if file:
        filepath = os.path.join(UPLOAD_FOLDER, file.filename)
        file.save(filepath)

        try:
            # fp16=False –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É –Ω–∞ CPU –±–µ–∑ –æ—à–∏–±–æ–∫
            result = model.transcribe(filepath, fp16=False)
            text = result['text']
            
            # –£–¥–∞–ª—è–µ–º —Ñ–∞–π–ª –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
            if os.path.exists(filepath):
                os.remove(filepath)
            
            return jsonify({'text': text})
        except Exception as e:
            if os.path.exists(filepath):
                os.remove(filepath)
            return jsonify({'error': str(e)}), 500

if __name__ == '__main__':
    app.run(debug=True, port=5000)


>>> –§–ê–ô–õ: templates/index.html
(–°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É templates, –≤–Ω—É—Ç—Ä–∏ –Ω–µ—ë —Ñ–∞–π–ª index.html –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥ –Ω–∏–∂–µ)

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê—É–¥–∏–æ –≤ –¢–µ–∫—Å—Ç</title>
    <style>
        body { font-family: sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; background-color: #f4f4f9;

Grig Grog, [20.11.2025 17:39]
}
        .container { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #333; }
        .form-group { margin-bottom: 20px; text-align: center; }
        input[type="file"] { padding: 10px; }
        button { padding: 10px 20px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; }
        button:hover { background-color: #0056b3; }
        button:disabled { background-color: #ccc; cursor: not-allowed; }
        
        #result-area { display: none; margin-top: 20px; }
        textarea { width: 100%; height: 200px; padding: 10px; border: 1px solid #ccc; border-radius: 5px; resize: vertical; }
        
        .loader { display: none; text-align: center; margin-top: 20px; }
        .spinner { border: 4px solid #f3f3f3; border-top: 4px solid #007bff; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; margin: 0 auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .download-btn { background-color: #28a745; margin-top: 10px; }
        .download-btn:hover { background-color: #218838; }
    </style>
</head>
<body>

<div class="container">
    <h1>üé§ –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è –ê—É–¥–∏–æ</h1>
    
    <div class="form-group">
        <input type="file" id="audioFile" accept="audio/*,video/*">
        <button onclick="uploadFile()" id="submitBtn">–†–∞—Å–ø–æ–∑–Ω–∞—Ç—å</button>
    </div>

    <div class="loader" id="loader">
        <div class="spinner"></div>
        <p>–ò–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞... –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –≤—Ä–µ–º—è.</p>
    </div>

    <div id="result-area">
        <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç:</h3>
        <textarea id="transcriptionText"></textarea>
        <button class="download-btn" onclick="downloadText()">–°–∫–∞—á–∞—Ç—å .txt</button>
    </div>
</div>

<script>
    async function uploadFile() {
        const fileInput = document.getElementById('audioFile');
        const file = fileInput.files[0];

        if (!file) {
            alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª!");
            return;
        }

        const formData = new FormData();
        formData.append('file', file);

        document.getElementById('loader').style.display = 'block';
        document.getElementById('result-area').style.display = 'none';
        document.getElementById('submitBtn').disabled = true;

        try {
            const response = await fetch('/transcribe', {
                method: 'POST',
                body: formData
            });

            const data = await response.json();

            if (response.ok) {
                document.getElementById('transcriptionText').value = data.text;
                document.getElementById('result-area').style.display = 'block';
            } else {
                alert('–û—à–∏–±–∫–∞: ' + (data.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'));
            }
        } catch (error) {
            alert('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error);
        } finally {
            document.getElementById('loader').style.display = 'none';
            document.getElementById('submitBtn').disabled = false;
        }
    }

    function downloadText() {
        const text = document.getElementById('transcriptionText').value;
        const blob = new Blob([text], { type: "text/plain" });
        const anchor = document.createElement("a");
        
        anchor.download = "transcription.txt";
        anchor.href = window.URL.createObjectURL(blob);
        anchor.target = "_blank";
        anchor.style.display = "none"; 
        document.body.appendChild(anchor);
        anchor.click();
        document.body.removeChild(anchor);
    }
</script>

</body>
</html>

–®–ê–ì 4: –ó–ê–ü–£–°–ö
--------------------------------------------------------------------------------
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞.
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
   python app.py
3. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –±—É–¥–µ—Ç —Å–∫–∞—á–∞–Ω–∞ –º–æ–¥–µ–ª—å –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ (–æ–∫–æ–ª–æ 150-500 –ú–±).
4. –ü–æ—Å–ª–µ –ø–æ—è–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è "Running on http://127.0.0.1:5000", –æ—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç—É —Å—Å—ã–ª–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ.
"""

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
file_path = "transcriber_instructio

Grig Grog, [20.11.2025 17:39]
n.txt"
with open(file_path, "w", encoding="utf-8") as f:
    f.write(instruction_content)

file_path